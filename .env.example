DATABASE_URL=postgresql://postgres:postgres@db:5432/agentic
REDIS_URL=redis://redis:6379/0
CRITIC_ENABLED=false
CRITIC_MAX_REWORKS=2
POLICY_GATE_ENABLED=false
ORCHESTRATOR_ENABLED=true
ORCHESTRATOR_RECOVER_PENDING=true
ORCHESTRATOR_RECOVER_IDLE_MS=60000
JOB_RECOVERY_ENABLED=true
POLICY_MODE=dev
PLANNER_MODE=rule_based
PLANNER_MAX_DEPTH=3
LLM_PROVIDER=mock
OPENAI_API_KEY=
TOOL_HTTP_FETCH_ENABLED=false
TOOL_HTTP_FETCH_ALLOWLIST=
TOOL_OUTPUT_SIZE_CAP=50000
POLICY_CONFIG_PATH=config/policy.yaml
SCHEMA_REGISTRY_PATH=/app/schemas
SCHEMA_VALIDATION_STRICT=false
OPENAI_TIMEOUT_S=60
OPENAI_MAX_RETRIES=2
# Tailor generation provider overrides (defaults are tighter than global OPENAI_*).
TAILOR_OPENAI_TIMEOUT_S=20
TAILOR_OPENAI_MAX_RETRIES=1
# Tailor evaluation mode:
# - llm: evaluate with separate LLM call (independent of improve step)
# - heuristic: deterministic keyword-overlap evaluator
# - self: use score returned by improve step
TAILOR_EVAL_MODE=llm
TAILOR_EVAL_PROVIDER=openai
TAILOR_EVAL_OPENAI_MODEL=
TAILOR_EVAL_OPENAI_API_KEY=
TAILOR_EVAL_OPENAI_BASE_URL=
TAILOR_EVAL_OPENAI_TEMPERATURE=
TAILOR_EVAL_OPENAI_MAX_OUTPUT_TOKENS=
TAILOR_EVAL_OPENAI_TIMEOUT_S=15
TAILOR_EVAL_OPENAI_MAX_RETRIES=1
# Optional iterative improve soft budget (seconds). If unset, falls back to MCP_TOOL_TIMEOUT_S.
# Tailor will stop early and return the last completed iteration instead of failing on timeout.
TAILOR_ITERATIVE_TIMEOUT_S=
# Reserve budget (seconds) for finalization/response; if unset a safer auto-reserve is used.
TAILOR_ITERATIVE_RESERVE_S=60
# Deduplicate concurrent/retry improve_iterative calls (same request payload hash).
TAILOR_ITERATIVE_CACHE_TTL_S=1800
TAILOR_ITERATIVE_INFLIGHT_WAIT_S=30
TAILOR_ITERATIVE_CACHE_MAX_ENTRIES=256
# MCP SDK call guardrails (fail fast + retry for transient SDK/session errors).
# If unset, timeout falls back to TAILOR_*_TIMEOUT or OPENAI_TIMEOUT_S (capped at 180s).
MCP_TOOL_TIMEOUT_S=600
# Extra headroom so outer tool timeout does not fire before MCP deadline/cleanup completes.
MCP_TOOL_OUTER_TIMEOUT_HEADROOM_S=15
MCP_TOOL_MAX_RETRIES=1
MCP_TOOL_RETRY_SLEEP_S=0.25
# Reserve budget (seconds) for fallback attempts; first primary attempt gets the rest.
MCP_FIRST_ATTEMPT_RESERVE_S=30
# Optional transport-level timeout for MCP streamable HTTP client (seconds).
# Leave unset to use MCP_TOOL_TIMEOUT_S.
MCP_TRANSPORT_TIMEOUT_S=
# Isolation mode for MCP calls:
# - thread: fast path
# - process: run MCP call in child process and hard-stop on timeout
MCP_TOOL_ISOLATION_MODE=process
# Minimum leaf-level content edits required per iterative improve pass.
TAILOR_MIN_CHANGES_PER_ITERATION=8
# Optional image build/push settings for Kubernetes deploys.
IMAGE_REGISTRY=ghcr.io
IMAGE_OWNER=
IMAGE_TAG=latest
NEXT_PUBLIC_API_URL=http://localhost:18000
CODER_API_URL=http://localhost:18010
RESUME_TAILOR_API_URL=http://localhost:18011
# Optional: comma-separated host headers allowed by FastMCP streamable HTTP endpoints.
# In Docker Compose defaults cover internal service names (coder, tailor) already.
MCP_ALLOWED_HOSTS=
WORKSPACE_DIR=/shared/workspace
# Document store backend for generated files:
# - filesystem: read/write via shared volume
# - s3: worker uploads artifacts to S3/MinIO; API falls back to object store for downloads
DOCUMENT_STORE_BACKEND=s3
DOCUMENT_STORE_S3_BUCKET=agentic-planner-worker
DOCUMENT_STORE_S3_PREFIX=document-store
DOCUMENT_STORE_S3_ENDPOINT=
DOCUMENT_STORE_S3_REGION=us-east-1
CODING_AGENT_TIMEOUT_S=90
CODER_HTTP_TIMEOUT_S=90
WORKER_GROUP=workers
WORKER_CONSUMER=
WORKER_READ_COUNT=1
WORKER_BLOCK_MS=1000
WORKER_RECOVER_PENDING=true
WORKER_RECOVER_IDLE_MS=60000
WORKER_RECOVER_INTERVAL_S=10
WORKER_RECOVER_COUNT=10
WORKER_RETRY_ENABLED=true
WORKER_RETRY_POLICY=transient
WORKER_DEFAULT_MAX_ATTEMPTS=3
WORKER_DLQ_ENABLED=true
CODER_LOG_RESPONSE_FULL=false
CODER_LLM_MAX_RETRIES=2
CODER_LLM_RETRY_SLEEP_S=1.5
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4318
